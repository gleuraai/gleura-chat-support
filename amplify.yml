# amplify.yml â€” Remix (Vite) + Prisma on Amplify Gen-2 (SSR)
version: 1
frontend:
  phases:
    preBuild:
      commands:
        - nvm use 20 || echo "Using default Node"
        - npm ci
        - npx prisma generate
    build:
      commands:
        - npm run build
  artifacts:
    # Static assets produced by "remix vite:build"
    baseDirectory: build/client
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
  # Start the SSR server
  start:
    command: node ./build/server/index.js
    port: 3000